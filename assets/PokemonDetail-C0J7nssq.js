import{L as y,A as h,t as b,u as f}from"./index-CnzU7Bv7.js";import{_ as P,c as a,g as x,a as e,f as u,b as g,w,v as C,t as l,h as v,F as d,r as c,j as E,o as i,n as k}from"./index-DWAEpMAa.js";const L={name:"PokemonDetail",components:{LoadingSpinner:y},setup(){return{pokeStore:f()}},data(){return{audio:null,isPlayingCry:!1,isImageLoading:!0}},computed:{loading(){return this.pokeStore.loading},pokemon(){const n=this.$route.params.id;return this.pokeStore.pokeDetails[n]},pokemonImage(){return this.pokemon?`${h.POKE_GIF_BASE_URL}/${this.pokemon.name}.gif`:""},evolutionChain(){const n=this.$route.params.id,s=this.pokeStore.evolutionChains[n];return s?s.evolutionDetails?s.evolutionDetails:[]:null}},methods:{goBack(){window.history.length>1?this.$router.go(-1):this.$router.push("/")},async fetchPokemonDetails(){const n=this.$route.params.id;if(this.pokemon)this.pokeStore.evolutionChains[n]||(console.log("Pokemon exists but no evolution chain, fetching..."),await this.pokeStore.fetchEvolutionChain(n));else try{await this.pokeStore.fetchPokeDetail(n)}catch(s){console.error("Error fetching Pokémon details:",s)}},handleImageError(n){n.target.src=`${h.POKE_PLACEHOLDER_BASE_URL}/400x400?text=Pokemon+Image`},handleEvolutionImageError(n){n.target.src=`${h.POKE_PLACEHOLDER_BASE_URL}/100x100?text=Pokemon`},async goToPokemon(n){await this.$router.push(`/pokemon/${n}`)},getTypeColor(n){return b[n]||"#A8A878"},playPokemonCry(){this.isPlayingCry||(this.isPlayingCry=!0,this.audio||(this.audio=new Audio,this.audio.addEventListener("ended",()=>{this.isPlayingCry=!1}),this.audio.addEventListener("error",()=>{console.error("Error playing Pokémon cry"),this.isPlayingCry=!1})),this.audio.src=`${h.POKE_AUDIO_BASE_URL}/${this.pokemon.name.toLowerCase()}.mp3`,this.audio.play().catch(n=>{console.error("Error playing Pokémon cry:",n),this.isPlayingCry=!1}))},handleImageLoad(){this.isImageLoading=!1},handleImageError(n){this.isImageLoading=!1,n.target.src=this.fallbackImage}},async mounted(){await this.fetchPokemonDetails()},watch:{"$route.params.id"(){console.log("Route changed, fetching new Pokemon details"),this.fetchPokemonDetails()}}},I={class:"pokemon-detail"},S={key:1,class:"container-fluid"},D={class:"container-fluid"},A={class:"row align-items-center"},B={class:"col-lg-8 col-md-7 col-12 d-flex flex-column align-items-center justify-content-center"},T={class:"back-container"},O={class:"pokemon-hero mb-4"},R={key:0,class:"loading-spinner"},j=["src","alt"],F={class:"text-center"},N={class:"d-flex align-items-center justify-content-center mb-3"},U={class:"pokemon-title mb-0"},K={class:"d-flex gap-2 justify-content-center"},z={class:"mb-4 mt-4 w-100"},H={class:"text-center"},V={key:0,class:"d-flex flex-row justify-content-center align-items-center gap-4 flex-wrap evolution-row"},G=["onClick"],q=["src","alt"],M={class:"evolution-info"},W={class:"fw-bold evolution-name"},J={class:"d-flex gap-1 justify-content-center mt-1"},Q={key:0,class:"evolution-arrow-horizontal"},X={key:1,class:"text-center text-muted"},Y={key:2,class:"text-center text-muted"},Z={class:"col-lg-4 col-md-5 col-12"},$={class:"card info-card h-100"},ee={class:"card-body"},se={class:"mb-4"},te={class:"text-muted mb-2"},oe={class:"mb-4"},ne={class:"row g-2"},ie={class:"col-6"},ae={class:"char-item"},le={class:"char-value"},re={class:"col-6"},de={class:"char-item"},ce={class:"char-value"},me={class:"col-6"},he={class:"char-item"},ue={class:"char-value"},ge={class:"col-6"},ke={class:"char-item"},ve={class:"char-value"},_e={class:"mb-4"},pe={class:"stats-container"},ye={class:"d-flex justify-content-between align-items-center mb-1"},be={class:"stat-name"},fe={class:"stat-value"},Pe={class:"progress",style:{height:"8px"}},xe={class:"mb-4"},we={class:"section-title mb-3"},Ce={class:"d-flex flex-wrap gap-1"},Ee={key:0,class:"badge bg-warning text-white"},Le={key:2,class:"container text-center py-5"},Ie={class:"error-state"};function Se(n,s,De,Ae,m,t){const _=E("LoadingSpinner");return i(),a("div",I,[t.loading?(i(),x(_,{key:0,height:"100vh",message:"Loading Pokémon details..."})):t.pokemon?(i(),a("div",S,[e("div",D,[e("div",A,[e("div",B,[e("div",T,[e("button",{class:"back-btn",onClick:s[0]||(s[0]=(...o)=>t.goBack&&t.goBack(...o)),onTouchstart:s[1]||(s[1]=(...o)=>t.goBack&&t.goBack(...o))},s[7]||(s[7]=[e("i",{class:"bi bi-arrow-left me-2"},null,-1),u(" Back to PokéDex ",-1)]),32)]),e("div",O,[m.isImageLoading?(i(),a("div",R)):g("",!0),w(e("img",{src:t.pokemonImage,alt:t.pokemon.name,class:"img-fluid hero-image",onLoad:s[2]||(s[2]=(...o)=>t.handleImageLoad&&t.handleImageLoad(...o)),onError:s[3]||(s[3]=(...o)=>t.handleImageError&&t.handleImageError(...o))},null,40,j),[[C,!m.isImageLoading]])]),e("div",F,[e("div",N,[e("h1",U,"#"+l(t.pokemon.id)+" "+l(t.pokemon.name),1),e("button",{class:v(["btn btn-sound ms-2",{playing:m.isPlayingCry}]),onClick:s[4]||(s[4]=(...o)=>t.playPokemonCry&&t.playPokemonCry(...o)),title:"Play Pokémon cry"},[e("i",{class:v(["bi",m.isPlayingCry?"bi-volume-up-fill":"bi-volume-up"])},null,2)],2)]),e("div",K,[(i(!0),a(d,null,c(t.pokemon.types,o=>(i(),a("span",{key:o.type.name,class:"badge type-badge",style:k({backgroundColor:t.getTypeColor(o.type.name)})},l(o.type.name),5))),128))])]),e("div",z,[s[11]||(s[11]=e("h4",{class:"evolutions-title mb-3 text-center"},"Evolutions",-1)),e("div",H,[t.evolutionChain&&t.evolutionChain.length>0?(i(),a("div",V,[(i(!0),a(d,null,c(t.evolutionChain,(o,p)=>(i(),a("div",{key:o.id,class:"evolution-card text-center p-3"},[e("div",{class:"evolution-img-wrap mb-2",onClick:r=>t.goToPokemon(o.id)},[e("img",{src:`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${o.id}.png`,alt:o.name,class:"evolution-img",onError:s[5]||(s[5]=(...r)=>t.handleEvolutionImageError&&t.handleEvolutionImageError(...r))},null,40,q)],8,G),e("div",M,[e("div",W,l(o.name),1),e("div",J,[(i(!0),a(d,null,c(o.types,r=>(i(),a("span",{key:r.type.name,class:"badge type-badge",style:k({backgroundColor:t.getTypeColor(r.type.name)})},l(r.type.name),5))),128))])]),p<t.evolutionChain.length-1?(i(),a("div",Q,s[8]||(s[8]=[e("i",{class:"bi bi-arrow-right"},null,-1)]))):g("",!0)]))),128))])):t.evolutionChain===null?(i(),a("div",X,s[9]||(s[9]=[e("i",{class:"bi bi-hourglass-split me-2"},null,-1),u(" Loading evolution chain... ",-1)]))):(i(),a("div",Y,s[10]||(s[10]=[e("i",{class:"bi bi-info-circle me-2"},null,-1),u(" This Pokémon has no evolutions. ",-1)])))])])]),e("div",Z,[e("div",$,[e("div",ee,[e("div",se,[s[12]||(s[12]=e("h3",{class:"section-title mb-3"},"Description",-1)),e("p",te,l(t.pokemon.name)+" is a fascinating Pokémon with unique abilities and characteristics. This Pokémon has captured the hearts of trainers worldwide with its distinctive features and powerful moves. ",1),s[13]||(s[13]=e("a",{href:"#",class:"text-warning text-decoration-none fw-semibold"},"+ Read more",-1))]),e("div",oe,[s[18]||(s[18]=e("h3",{class:"section-title mb-3"},"Characteristics",-1)),e("div",ne,[e("div",ie,[e("div",ae,[s[14]||(s[14]=e("span",{class:"char-label"},"Height",-1)),e("span",le,l((t.pokemon.height/10).toFixed(1))+"m",1)])]),e("div",re,[e("div",de,[s[15]||(s[15]=e("span",{class:"char-label"},"Weight",-1)),e("span",ce,l((t.pokemon.weight/10).toFixed(1))+"kg",1)])]),e("div",me,[e("div",he,[s[16]||(s[16]=e("span",{class:"char-label"},"Base Exp",-1)),e("span",ue,l(t.pokemon.base_experience||"N/A"),1)])]),e("div",ge,[e("div",ke,[s[17]||(s[17]=e("span",{class:"char-label"},"Abilities",-1)),e("span",ve,l(t.pokemon.abilities[0]?.ability.name||"N/A"),1)])])])]),e("div",_e,[s[19]||(s[19]=e("h3",{class:"section-title mb-3"},"Stats",-1)),e("div",pe,[(i(!0),a(d,null,c(t.pokemon.stats,o=>(i(),a("div",{key:o.stat.name,class:"stat-row mb-2"},[e("div",ye,[e("span",be,l(o.stat.name),1),e("span",fe,l(o.base_stat),1)]),e("div",Pe,[e("div",{class:"progress-bar stat-fill",style:k({width:`${o.base_stat/255*100}%`})},null,4)])]))),128))])]),e("div",xe,[e("h3",we,"Moves ("+l(t.pokemon.moves.length)+")",1),e("div",Ce,[(i(!0),a(d,null,c(t.pokemon.moves.slice(0,8),o=>(i(),a("span",{key:o.move.name,class:"badge bg-light text-dark move-tag"},l(o.move.name),1))),128)),t.pokemon.moves.length>8?(i(),a("span",Ee,"+"+l(t.pokemon.moves.length-8)+" more",1)):g("",!0)])])])])])])])])):(i(),a("div",Le,[e("div",Ie,[s[20]||(s[20]=e("i",{class:"bi bi-exclamation-triangle display-1 text-warning mb-3"},null,-1)),s[21]||(s[21]=e("h3",null,"Pokémon not found",-1)),s[22]||(s[22]=e("p",{class:"text-muted"},"The Pokémon you're looking for doesn't exist.",-1)),e("button",{class:"btn btn-primary",onClick:s[6]||(s[6]=o=>n.$router.push("/"))},"Back to PokéDex")])]))])}const Oe=P(L,[["render",Se],["__scopeId","data-v-b1b27637"]]);export{Oe as default};
