import{t as C,A as S,L,T as F,R as I,u as M}from"./index-DTo5bJno.js";import{_ as w,c as r,a as m,w as u,b as t,v as y,t as d,F as p,r as b,d as h,o as i,n as T,e as E,f as v,g as R,h as f,i as V,j as P,k as _,l as U}from"./index-BkGvBPgk.js";const D={name:"PokemonCard",props:{pokemon:{type:Object,required:!0}},data(){return{imageLoading:!0}},computed:{pokemonId(){return this.pokemon.id||this.extractIdFromUrl(this.pokemon.url)},pokemonImage(){const l=this.pokemonId;return`${S.POKE_IMAGE_BASE_URL}/${l}.png`}},methods:{extractIdFromUrl(l){const e=l.match(/\/(\d+)\/$/);return e?e[1]:"1"},navigateToDetail(){this.$router.push(`/pokemon/${this.pokemonId}`)},handleImageError(){this.imageLoading=!1},getTypeColor(l){return C[l]||"#A8A878"}}},Q={key:0,class:"loading-container"},A={class:"pokemon-image-container"},j=["src","alt"],N={class:"card-content"},O={class:"pokemon-name-section"},B={class:"pokemon-name"},K={class:"pokemon-id"},G={key:0,class:"pokemon-types"},q={class:"types-container"};function z(l,e,a,g,n,s){return i(),r("div",{class:"pokemon-card",onClick:e[3]||(e[3]=(...c)=>s.navigateToDetail&&s.navigateToDetail(...c))},[n.imageLoading?(i(),r("div",Q,e[4]||(e[4]=[t("div",{class:"loading-spinner"},null,-1)]))):m("",!0),u(t("div",A,[t("img",{src:s.pokemonImage,alt:a.pokemon.name,class:"pokemon-image",onLoad:e[0]||(e[0]=c=>n.imageLoading=!1),onError:e[1]||(e[1]=(...c)=>s.handleImageError&&s.handleImageError(...c))},null,40,j)],512),[[y,!n.imageLoading]]),t("div",N,[t("div",O,[t("h3",B,d(a.pokemon.name),1),t("span",K,"#"+d(s.pokemonId),1)]),a.pokemon.types&&a.pokemon.types.length>0?(i(),r("div",G,[t("div",q,[(i(!0),r(p,null,b(a.pokemon.types,c=>(i(),r("span",{key:c.type.name,class:"type-badge",style:T({backgroundColor:s.getTypeColor(c.type.name)})},d(c.type.name),5))),128))])])):m("",!0),t("button",{class:"action-btn",onClick:e[2]||(e[2]=h((...c)=>s.navigateToDetail&&s.navigateToDetail(...c),["stop"]))},"View More")])])}const H=w(D,[["render",z],["__scopeId","data-v-e98ebe35"]]),Y={name:"Home",components:{LoadingSpinner:L,PokemonCard:H},setup(){return{pokeStore:M()}},data(){return{searchQuery:"",selectedRegions:[],selectedTypes:[],regions:I,types:F,showFilterModal:!1}},computed:{loading(){return this.pokeStore.loading},pokeList(){return this.pokeStore.pokeList},filteredPokeList(){let l=this.pokeStore.pokeList;return this.selectedRegions.length>0&&(l=l.filter(e=>this.selectedRegions.includes(e.region))),this.selectedTypes.length>0&&(l=l.filter(e=>e.types.some(a=>this.selectedTypes.includes(a.type.name.charAt(0).toUpperCase()+a.type.name.slice(1))))),this.searchQuery&&(l=l.filter(e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase()))),l},paginatedPokeList(){const l=(this.pokeStore.currentPage-1)*this.pokeStore.itemsPerPage,e=l+this.pokeStore.itemsPerPage;return this.filteredPokeList.slice(l,e)},currentPage(){return this.pokeStore.currentPage},totalPages(){return Math.ceil(this.filteredPokeList.length/this.pokeStore.itemsPerPage)},totalItems(){return this.filteredPokeList.length},storeItemsPerPage:{get(){return this.pokeStore.itemsPerPage},set(l){this.pokeStore.setItemsPerPage(l)}},visiblePages(){const l=[];let a=Math.max(1,this.currentPage-Math.floor(2.5)),g=Math.min(this.totalPages,a+5-1);g-a+1<5&&(a=Math.max(1,g-5+1));for(let n=a;n<=g;n++)l.push(n);return l}},methods:{clearSearch(){this.searchQuery="",this.pokeStore.setSearchQuery(""),this.pokeStore.setCurrentPage(1)},changePage(l){l>=1&&l<=this.totalPages&&(this.pokeStore.setCurrentPage(l),window.scrollTo({top:0,behavior:"smooth"}))},applyFilters(){this.showFilterModal=!1,this.pokeStore.setCurrentPage(1),this.$forceUpdate()},resetFilters(){this.selectedRegions=[],this.selectedTypes=[],this.pokeStore.setCurrentPage(1),this.$forceUpdate()},handleKeyDown(l){l.key==="Escape"&&this.showFilterModal&&(this.showFilterModal=!1)},handleOutsideClick(l){if(this.showFilterModal){const e=document.querySelector(".modal-content");e&&!e.contains(l.target)&&!l.target.closest(".filter-icon-btn")&&!l.target.closest(".active-filter-badge")&&(this.showFilterModal=!1)}}},async mounted(){await this.pokeStore.fetchPokeList(),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("click",this.handleOutsideClick,!0),this.showFilterModal=!1},beforeUnmount(){document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("click",this.handleOutsideClick,!0)}},J={class:"pokemon-home"},W={class:"container-fluid header-bg text-white py-3 py-md-2 mb-3 mb-md-4"},X={class:"container"},Z={class:"row align-items-center"},$={class:"col-12 col-md-5 mb-3 mb-md-0"},ee={class:"search-container"},te={class:"input-group input-group-lg"},se={class:"col-12 col-md-3 text-center text-md-end"},oe={class:"pokemon-count"},le={class:"badge bg-light text-white fs-7"},ne={class:"container"},ie={class:"modal-backdrop fade show"},re={class:"modal-dialog modal-dialog-centered modal-lg"},ae={class:"modal-content"},de={class:"modal-header"},ce={class:"modal-body"},me={class:"filter-section p-3 rounded bg-light mb-3 border"},ue={class:"d-flex justify-content-between align-items-center mb-2"},he={key:0,class:"badge filter-badge"},ge={class:"d-flex flex-wrap gap-2"},pe=["id","value"],be=["for"],ke={class:"filter-section p-3 rounded bg-light border"},fe={class:"d-flex justify-content-between align-items-center mb-2"},ye={key:0,class:"badge filter-badge"},ve={class:"d-flex flex-wrap gap-2"},Pe=["id","value"],_e=["for"],we={class:"modal-footer"},xe={key:1},Ce={class:"row mb-3"},Se={class:"col-12"},Le={class:"d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center"},Fe={class:"text-muted mb-2 mb-md-0"},Ie={key:0,class:"text-primary"},Me={class:"d-flex align-items-center"},Te={class:"row g-3 g-md-4 mb-4"},Ee={key:0,class:"text-center py-5"},Re={class:"no-results"},Ve={key:1,class:"row"},Ue={class:"col-12"},De={"aria-label":"Pokémon pagination"},Qe={class:"pagination pagination-sm pagination-md justify-content-center flex-wrap"},Ae=["disabled"],je=["onClick"],Ne=["disabled"];function Oe(l,e,a,g,n,s){const c=P("LoadingSpinner"),x=P("PokemonCard");return i(),r("div",J,[t("div",W,[t("div",X,[t("div",Z,[e[19]||(e[19]=t("div",{class:"col-12 col-md-4 mb-3 mb-md-0"},[t("h1",{class:"display-6 display-md-5 mb-0"},"Pokémon")],-1)),t("div",$,[t("div",ee,[t("div",te,[e[17]||(e[17]=t("span",{class:"input-group-text bg-white border-end-0"},[t("i",{class:"bi bi-search text-muted"})],-1)),u(t("input",{type:"text",class:"form-control border-start-0",placeholder:"Search Pokémon by name...","onUpdate:modelValue":e[0]||(e[0]=o=>n.searchQuery=o),onInput:e[1]||(e[1]=(...o)=>l.handleSearch&&l.handleSearch(...o))},null,544),[[E,n.searchQuery]]),n.searchQuery?(i(),r("button",{key:0,class:"btn btn-outline-secondary",type:"button",onClick:e[2]||(e[2]=(...o)=>s.clearSearch&&s.clearSearch(...o))},e[15]||(e[15]=[t("i",{class:"bi bi-x-lg"},null,-1)]))):m("",!0),t("button",{class:"btn filter-icon-btn",type:"button",onClick:e[3]||(e[3]=h(o=>n.showFilterModal=!0,["stop"]))},e[16]||(e[16]=[t("i",{class:"bi bi-funnel"},null,-1)]))])])]),t("div",se,[t("div",oe,[t("span",le,d(s.totalItems)+" Pokémon",1),n.selectedRegions.length>0||n.selectedTypes.length>0?(i(),r("span",{key:0,class:"badge active-filter-badge ms-2",onClick:e[4]||(e[4]=h(o=>n.showFilterModal=!0,["stop"])),role:"button"},[e[18]||(e[18]=t("i",{class:"bi bi-funnel-fill me-1"},null,-1)),v(" "+d(n.selectedRegions.length+n.selectedTypes.length),1)])):m("",!0)])])])])]),t("div",ne,[u(t("div",ie,null,512),[[y,n.showFilterModal]]),u(t("div",{class:f(["modal",{"d-block":n.showFilterModal,show:n.showFilterModal}]),tabindex:"-1"},[t("div",re,[t("div",ae,[t("div",de,[e[20]||(e[20]=t("h5",{class:"modal-title",id:"filterModalLabel"},"Advanced Filter",-1)),t("button",{type:"button",class:"btn-close",onClick:e[5]||(e[5]=h(o=>n.showFilterModal=!1,["stop"])),"aria-label":"Close"})]),t("div",ce,[t("div",me,[t("div",ue,[e[21]||(e[21]=t("label",{class:"fw-bold mb-0"},"Filter by Region",-1)),n.selectedRegions.length>0?(i(),r("span",he,d(n.selectedRegions.length)+" selected",1)):m("",!0)]),t("div",ge,[(i(!0),r(p,null,b(n.regions,o=>(i(),r("div",{key:o.value,class:"form-check form-check-inline filter-check"},[u(t("input",{class:"form-check-input",type:"checkbox",id:"region-"+o.value,value:o.value,"onUpdate:modelValue":e[6]||(e[6]=k=>n.selectedRegions=k)},null,8,pe),[[_,n.selectedRegions]]),t("label",{class:"form-check-label",for:"region-"+o.value},d(o.label),9,be)]))),128))])]),t("div",ke,[t("div",fe,[e[22]||(e[22]=t("label",{class:"fw-bold mb-0"},"Filter by Type",-1)),n.selectedTypes.length>0?(i(),r("span",ye,d(n.selectedTypes.length)+" selected",1)):m("",!0)]),t("div",ve,[(i(!0),r(p,null,b(n.types,o=>(i(),r("div",{key:o,class:"form-check form-check-inline filter-check"},[u(t("input",{class:"form-check-input",type:"checkbox",id:"type-"+o,value:o,"onUpdate:modelValue":e[7]||(e[7]=k=>n.selectedTypes=k)},null,8,Pe),[[_,n.selectedTypes]]),t("label",{class:"form-check-label",for:"type-"+o},d(o),9,_e)]))),128))])])]),t("div",we,[t("button",{type:"button",class:"btn btn-outline-danger",onClick:e[8]||(e[8]=h((...o)=>s.resetFilters&&s.resetFilters(...o),["stop"]))},"Reset Filters"),t("div",null,[t("button",{type:"button",class:"btn btn-secondary me-2",onClick:e[9]||(e[9]=h(o=>n.showFilterModal=!1,["stop"]))},"Close"),t("button",{type:"button",class:"btn filter-apply-btn",onClick:e[10]||(e[10]=h((...o)=>s.applyFilters&&s.applyFilters(...o),["stop"]))},"Apply Filters")])])])])],2),[[y,n.showFilterModal]]),s.loading?(i(),R(c,{key:0,height:"400px"})):(i(),r("div",xe,[t("div",Ce,[t("div",Se,[t("div",Le,[t("p",Fe,[v(" Showing "+d(s.filteredPokeList.length)+" of "+d(s.totalItems)+" Pokémon ",1),n.searchQuery?(i(),r("span",Ie,'for "'+d(n.searchQuery)+'"',1)):m("",!0)]),t("div",Me,[e[24]||(e[24]=t("label",{class:"form-label me-2 mb-0"},"Items per page:",-1)),u(t("select",{class:"form-select form-select-sm",style:{width:"auto"},"onUpdate:modelValue":e[11]||(e[11]=o=>s.storeItemsPerPage=o)},e[23]||(e[23]=[t("option",{value:"12"},"12",-1),t("option",{value:"20"},"20",-1),t("option",{value:"50"},"50",-1)]),512),[[V,s.storeItemsPerPage]])])])])]),t("div",Te,[(i(!0),r(p,null,b(s.paginatedPokeList,o=>(i(),r("div",{key:o.name,class:"col-6 col-sm-4 col-md-3 col-lg-2"},[U(x,{pokemon:o},null,8,["pokemon"])]))),128))]),s.filteredPokeList.length===0&&!s.loading?(i(),r("div",Ee,[t("div",Re,[e[25]||(e[25]=t("i",{class:"bi bi-search display-1 text-muted mb-3"},null,-1)),e[26]||(e[26]=t("h3",{class:"text-muted"},"No Pokémon found",-1)),e[27]||(e[27]=t("p",{class:"text-muted"},"Try adjusting your search terms",-1)),t("button",{class:"btn btn-primary",onClick:e[12]||(e[12]=(...o)=>s.clearSearch&&s.clearSearch(...o))},"Clear Search")])])):m("",!0),s.totalPages>1?(i(),r("div",Ve,[t("div",Ue,[t("nav",De,[t("ul",Qe,[t("li",{class:f(["page-item",{disabled:s.currentPage===1}])},[t("button",{class:"page-link",onClick:e[13]||(e[13]=o=>s.changePage(s.currentPage-1)),disabled:s.currentPage===1},e[28]||(e[28]=[t("i",{class:"bi bi-chevron-left"},null,-1)]),8,Ae)],2),(i(!0),r(p,null,b(s.visiblePages,o=>(i(),r("li",{key:o,class:f(["page-item",{active:o===s.currentPage}])},[t("button",{class:"page-link",onClick:k=>s.changePage(o)},d(o),9,je)],2))),128)),t("li",{class:f(["page-item",{disabled:s.currentPage===s.totalPages}])},[t("button",{class:"page-link",onClick:e[14]||(e[14]=o=>s.changePage(s.currentPage+1)),disabled:s.currentPage===s.totalPages},e[29]||(e[29]=[t("i",{class:"bi bi-chevron-right"},null,-1)]),8,Ne)],2)])])])])):m("",!0)]))])])}const Ge=w(Y,[["render",Oe],["__scopeId","data-v-ed4e57ad"]]);export{Ge as default};
